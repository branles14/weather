# Ensure venv exists
if [[ ! -d .venv ]]; then
    echo "Creating missing virtual environment..."
    if ! python -m venv .venv; then
        echo "ERROR: Failed to create virtual environment"
        exit 1
    fi
fi

# Sanity check for activation script
if [[ ! -f .venv/bin/activate ]]; then
    echo "ERROR: Malformed virtual environment"
    exit 1
fi

# Attenpt to activate venv
echo "Activating virtual environment..."
if ! source .venv/bin/activate; then
    echo "ERROR: Failed to activate virtual environment"
    exit 1
fi
